# Python 基础

## 数据类型

### 内置类型概览

Python 内置了多种基本数据类型，涵盖数值、文本、布尔、空值和字节序列。

```python
# 整数：任意精度，无溢出
age = 30
big_num = 10 ** 100  # 支持大整数

# 浮点数：IEEE 754 双精度
pi = 3.14159
sci = 1.5e-3  # 科学计数法，等于 0.0015

# 字符串：不可变的 Unicode 字符序列
name = "Alice"

# 布尔：True / False，是 int 的子类
flag = True
print(int(True))   # 1
print(int(False))  # 0

# None：表示"无值"，类似其他语言的 null
result = None

# bytes：不可变字节序列，常用于二进制数据
data = b"hello"
raw = bytes([72, 101, 108, 108, 111])  # 等价于 b"Hello"
```

### 可变 vs 不可变类型

| 类型 | 可变 | 说明 |
|------|------|------|
| int / float / bool | 不可变 | 赋值即创建新对象 |
| str | 不可变 | 任何修改都返回新字符串 |
| tuple | 不可变 | 元素不可替换 |
| list | 可变 | 支持增删改 |
| dict | 可变 | 键值对可增删改 |
| set | 可变 | 元素可增删 |

```python
# 不可变：修改变量名指向新对象，原对象不变
a = "hello"
b = a
a += " world"  # a 指向新字符串，b 仍指向 "hello"
print(b)  # hello

# 可变：多个变量共享同一对象
x = [1, 2, 3]
y = x          # y 和 x 指向同一列表
y.append(4)
print(x)  # [1, 2, 3, 4]，x 也被修改了

# 避免共享引用，使用浅拷贝
z = x.copy()
z.append(5)
print(x)  # [1, 2, 3, 4]，x 不受影响
```

### 动态类型与强类型

```python
# 动态类型：变量无需声明类型，运行时确定
x = 42       # int
x = "hello"  # 现在是 str，合法

# 强类型：不同类型之间不会隐式转换
# print("age: " + 18)  # TypeError，不能直接拼接 str 和 int

# 必须显式转换
print("age: " + str(18))  # age: 18

# 用 type() 查看类型
print(type(3.14))   # <class "float">
print(type(True))   # <class "bool">
```

## 变量与赋值

### 变量命名规则

```python
# 合法命名：字母、数字、下划线，不能以数字开头
user_name = "Alice"   # 推荐：蛇形命名法（snake_case）
_private = 42         # 单下划线前缀：约定为私有
MAX_SIZE = 100        # 全大写：约定为常量

# 不合法（会报 SyntaxError）
# 2name = "Bob"
# my-var = 1

# 避免使用内置名称作为变量名
# list = [1, 2]  # 会覆盖内置 list 类型，不推荐
```

### 多重赋值与解包

```python
# 同时给多个变量赋相同的值
a = b = c = 0

# 元组解包：右侧元素数量必须与左侧变量数量一致
x, y, z = 1, 2, 3

# 交换变量（Python 特有的简洁写法）
x, y = y, x

# 星号解包：收集剩余元素
first, *rest = [1, 2, 3, 4, 5]
print(first)  # 1
print(rest)   # [2, 3, 4, 5]

*head, last = [1, 2, 3, 4, 5]
print(head)   # [1, 2, 3, 4]
print(last)   # 5

# 嵌套解包
(a, b), c = (1, 2), 3
print(a, b, c)  # 1 2 3
```

### 增量赋值

```python
n = 10

n += 3   # n = n + 3  -> 13
n -= 2   # n = n - 2  -> 11
n *= 2   # n = n * 2  -> 22
n //= 3  # n = n // 3 -> 7（整除）
n **= 2  # n = n ** 2 -> 49（幂运算）
n %= 10  # n = n % 10 -> 9（取余）

# 字符串和列表也支持 +=
s = "hello"
s += " world"  # "hello world"

lst = [1, 2]
lst += [3, 4]  # [1, 2, 3, 4]，等价于 lst.extend([3, 4])
```

## 运算符

### 算术、比较、逻辑运算符

```python
# 算术运算符
print(7 / 2)   # 3.5，真除法
print(7 // 2)  # 3，整除（向下取整）
print(7 % 2)   # 1，取余
print(2 ** 8)  # 256，幂运算

# 比较运算符：返回 bool
print(3 > 2)   # True
print(3 == 3)  # True
print(3 != 4)  # True

# 链式比较（Python 特有）
x = 5
print(1 < x < 10)  # True，等价于 1 < x and x < 10

# 逻辑运算符：and / or / not
print(True and False)  # False
print(True or False)   # True
print(not True)        # False

# 短路求值：and 遇到假值停止，or 遇到真值停止
print(0 or "default")   # "default"（0 为假，返回后者）
print(1 and "ok")       # "ok"（1 为真，返回后者）
print(None or 42)       # 42
```

### 位运算符

```python
a = 0b1010  # 10
b = 0b1100  # 12

print(bin(a & b))   # 0b1000 -> 8，按位与
print(bin(a | b))   # 0b1110 -> 14，按位或
print(bin(a ^ b))   # 0b0110 -> 6，按位异或
print(bin(~a))      # -0b1011 -> -11，按位取反
print(bin(a << 1))  # 0b10100 -> 20，左移一位（乘以 2）
print(bin(a >> 1))  # 0b101 -> 5，右移一位（除以 2）
```

### is vs ==

```python
# == 比较值是否相等
# is 比较是否是同一个对象（内存地址相同）
a = [1, 2, 3]
b = [1, 2, 3]
c = a

print(a == b)  # True，值相同
print(a is b)  # False，不同对象
print(a is c)  # True，同一对象

# None 比较应使用 is，而非 ==
x = None
print(x is None)   # True（推荐）
print(x == None)   # True（不推荐）

# 小整数缓存：Python 缓存 -5 ~ 256 的整数对象
x = 256
y = 256
print(x is y)  # True（缓存范围内）
x = 257
y = 257
print(x is y)  # False（超出缓存范围，不同对象）
```

### 三元表达式

```python
# 语法：值_为真 if 条件 else 值_为假
age = 20
status = "adult" if age >= 18 else "minor"
print(status)  # adult

# 可嵌套，但不推荐过深
score = 75
grade = "A" if score >= 90 else ("B" if score >= 75 else "C")
print(grade)  # B
```
