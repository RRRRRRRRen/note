# 第二章 位置匹配

> 正则表达式是匹配模式，要么匹配字符，要么匹配位置。这一章主要介绍匹配位置。

## 1. 什么是位置

位置是相邻字符之间的位置。

## 2. 如何匹配位置

>  位置匹配的锚字符

| 字符     | 含义         | 说明                                                         |
| -------- | ------------ | ------------------------------------------------------------ |
| `^`      | 脱字符       | 匹配行的开头                                                 |
| `$`      | 美元符       | 匹配行的结尾                                                 |
| `\b`     | 单词的边界   | ① \w和\W之间的位置<br />② ^与\w之间的位置<br />③ \w与$之间的位置 |
| `\B`     | 非单词的边界 | ① \w与\w之间的位置<br />② \W与\W之间的位置<br />③^与\W之间的位置<br />④\W与$之间的位置 |
| `(?=p)`  |              | p子模式前面的位置                                            |
| `(?!p)`  |              | 非p子模式前面的位置                                          |
| `(?<=p)` |              | p子模式后面的位置                                            |
| `(?<!p)` |              | 非p子模式后面的位置                                          |

### 2.1 `^`和`$`

`^`：脱字符，匹配开头，在多行匹配中匹配行开头。

`$`：美元符，匹配结尾，在多行匹配中匹配行结尾。

下面的案例将行的开头用‘#’代替：

```js
var result = "hello".replace(/^|$/g, '#');
result // => "#hello#"
```

在多行匹配`m`模式下的行为：

```js
var result = "I\nlove\njavascript".replace(/^|$/gm, '#');
console.log(result);
/*
#I#
#love#
#javascript#
*/
```

### 2.2 `\b`和`\B`

`\b`：单词边界，具体就是`\w`和`\W`之间的位置，也包括`\w`和`^`之间的位置，也包括`\w`和`$`之间的位置。

比如一个文件名的`\b`，如下：

```js
var result = "[JS] Lesson_01.mp4".replace(/\b/g, '#');
result // => "[#JS#] #Lesson_01#.#mp4#"
```

`\B`：非单词边界。具体说来就是`\w`与`\w`、`\W`与`\W`、`^`与`\W`，`\W`与`$`之间的位置。

比如一个文件名的`\D`，如下：

```js
var result = "[JS] Lesson_01.mp4".replace(/\B/g, '#');
result // => "#[J#S]# L#e#s#s#o#n#_#0#1.m#p#4"
```

### 2.3 `(?=p)`和`(?!p)`

`(?=p)`：其中`p`是一个子模式，即`p`前面的位置。

**案例**：寻找`l`前面的位置。

```js
var result = "hello".replace(/(?=l)/g, '#');
console.log(result); 
// => "he#l#lo"
```

`(?!p)`：其中`p`是一个子模式，即不符合`p`子模式前面的位置。

**案例**：寻找非`l`前面的位置。

```js
var result = "hello".replace(/(?!l)/g, '#');
console.log(result); 
// => "#h#ell#o#"
```

### 2.4 `(?<=p)`和`(?<!p)`

`(?<=p)`：其中`p`是一个子模式，即`p`后面的位置。

**案例**：寻找`l`后面的位置。

```js
var result = "hello".replace(/(?<=l)/g, '#');
console.log(result); 
// => "hel#l#o"
```

`(?<!p)`：其中`p`是一个子模式，即不符合`p`子模式后面的位置。

**案例**：寻找非`l后面的位置。

```js
var result = "hello".replace(/(?<!l)/g, '#');
console.log(result); 
// => "h#e#llo#"
```


